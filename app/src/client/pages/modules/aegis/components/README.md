# Aegis Module Forms Documentation\n\n## Overview\n\nThis directory contains comprehensive form implementations for the Aegis security incident management module. All forms follow consistent patterns with robust validation, error handling, and user experience best practices.\n\n## ğŸ“ Structure\n\n```\nsrc/client/pages/modules/aegis/components/\nâ”œâ”€â”€ forms/\nâ”‚   â”œâ”€â”€ AlertForm.tsx           # Alert creation/editing with bulk operations\nâ”‚   â”œâ”€â”€ IncidentForm.tsx        # Incident management with SLA tracking\nâ”‚   â”œâ”€â”€ CaseForm.tsx           # Investigation case management\nâ”‚   â”œâ”€â”€ ObservableForm.tsx     # IOC management with TLP/PAP protocols\nâ”‚   â”œâ”€â”€ EvidenceForm.tsx       # Digital evidence with chain of custody\nâ”‚   â”œâ”€â”€ TaskForm.tsx           # Task management with dependencies\nâ”‚   â”œâ”€â”€ TTPForm.tsx            # MITRE ATT&CK framework mapping\nâ”‚   â””â”€â”€ EnhancedAlertForm.tsx  # Example with full validation integration\nâ”œâ”€â”€ shared/\nâ”‚   â””â”€â”€ FormComponents.tsx     # Reusable form components\nâ”œâ”€â”€ modals/\nâ”‚   â””â”€â”€ FormModals.tsx         # Modal/drawer wrappers\nâ”œâ”€â”€ validation/\nâ”‚   â””â”€â”€ ValidationSchemas.ts   # Zod validation schemas\nâ””â”€â”€ error/\n    â””â”€â”€ ErrorHandling.tsx      # Error boundaries and handling\n```\n\n## ğŸš€ Quick Start\n\n### Basic Form Usage\n\n```tsx\nimport { AlertForm } from '../components/forms/AlertForm';\nimport { ResponsiveFormDialog } from '../components/modals/FormModals';\n\nfunction MyComponent() {\n  const [open, setOpen] = useState(false);\n  \n  return (\n    <ResponsiveFormDialog\n      trigger={<Button>Create Alert</Button>}\n      title=\"Create New Alert\"\n      open={open}\n      onOpenChange={setOpen}\n      size=\"xl\"\n    >\n      <AlertForm \n        onSuccess={() => {\n          setOpen(false);\n          // Handle success\n        }}\n        onCancel={() => setOpen(false)}\n      />\n    </ResponsiveFormDialog>\n  );\n}\n```\n\n### Enhanced Form with Validation\n\n```tsx\nimport { EnhancedAlertForm } from '../components/forms/EnhancedAlertForm';\nimport { FormErrorBoundary } from '../components/error/ErrorHandling';\n\nfunction MyEnhancedComponent() {\n  return (\n    <FormErrorBoundary>\n      <EnhancedAlertForm \n        variant=\"full\"\n        onSuccess={handleSuccess}\n        onCancel={handleCancel}\n      />\n    </FormErrorBoundary>\n  );\n}\n```\n\n## ğŸ“‹ Available Forms\n\n### 1. AlertForm.tsx\n**Purpose**: Security alert creation and management\n\n**Features**:\n- âœ… Severity classification (Low, Medium, High, Critical)\n- âœ… Status tracking (New, Acknowledged, Investigating, Resolved)\n- âœ… Source and category management\n- âœ… Tag management with suggestions\n- âœ… Quick creation variant\n- âœ… Bulk operations (merge, assign, escalate, close)\n\n**Props**:\n```tsx\ninterface AlertFormProps {\n  initialData?: Alert;\n  onSuccess?: () => void;\n  onCancel?: () => void;\n}\n```\n\n**Usage**:\n```tsx\n<AlertForm \n  initialData={existingAlert} // For editing\n  onSuccess={() => refetchAlerts()}\n  onCancel={() => setModalOpen(false)}\n/>\n```\n\n### 2. IncidentForm.tsx\n**Purpose**: Security incident investigation management\n\n**Features**:\n- âœ… SLA calculation and tracking\n- âœ… Playbook application\n- âœ… Affected systems management\n- âœ… Communication and escalation plans\n- âœ… Auto-assignment based on severity\n- âœ… Timeline tracking\n\n**Key Components**:\n- SLA configuration with automatic calculation\n- System impact assessment\n- Playbook selection and application\n- Communication plan templates\n\n### 3. CaseForm.tsx\n**Purpose**: Investigation case management\n\n**Features**:\n- âœ… Confidentiality levels (Public, Internal, Confidential, Restricted)\n- âœ… Investigation objectives with templates\n- âœ… Resource allocation and tracking\n- âœ… Timeline and milestone management\n- âœ… Evidence association\n- âœ… TTP mapping integration\n\n**Unique Elements**:\n- Objective template system\n- Resource management (Personnel, Tools, External)\n- Confidentiality level workflows\n- Investigation timeline tracking\n\n### 4. ObservableForm.tsx\n**Purpose**: Indicators of Compromise (IOC) management\n\n**Features**:\n- âœ… TLP (Traffic Light Protocol) classification\n- âœ… PAP (Permissible Actions Protocol) support\n- âœ… IOC type validation (IP, Domain, URL, Hash, Email, File)\n- âœ… Enrichment workflows\n- âœ… Bulk import capabilities\n- âœ… Confidence scoring\n\n**IOC Types Supported**:\n- IP addresses (with validation)\n- Domain names\n- URLs\n- File hashes (MD5, SHA1, SHA256)\n- Email addresses\n- File indicators\n\n### 5. EvidenceForm.tsx\n**Purpose**: Digital evidence management with chain of custody\n\n**Features**:\n- âœ… File upload with drag & drop\n- âœ… Hash calculation (MD5, SHA1, SHA256, SHA512)\n- âœ… Chain of custody logging\n- âœ… Metadata extraction\n- âœ… Evidence integrity verification\n- âœ… Storage location tracking\n\n**Chain of Custody**:\n- Handler tracking\n- Action logging (Collected, Analyzed, Transferred, Stored)\n- Timestamp verification\n- Notes and context\n\n### 6. TaskForm.tsx\n**Purpose**: Task management with dependency tracking\n\n**Features**:\n- âœ… Dependency management\n- âœ… Progress tracking\n- âœ… Time estimation and actual tracking\n- âœ… Task templates\n- âœ… Priority and status management\n- âœ… Quick task creation\n\n**Advanced Features**:\n- Dependency visualization\n- Progress percentage tracking\n- Time estimation vs. actual comparison\n- Template system for common tasks\n\n### 7. TTPForm.tsx\n**Purpose**: MITRE ATT&CK framework integration\n\n**Features**:\n- âœ… Tactic selection from MITRE ATT&CK\n- âœ… Technique and sub-technique mapping\n- âœ… Occurrence tracking\n- âœ… Confidence scoring\n- âœ… Evidence correlation\n- âœ… Mitigation strategies\n\n**MITRE Integration**:\n- Interactive tactic selection\n- Technique filtering by tactic\n- Sub-technique support\n- Direct links to MITRE ATT&CK website\n\n## ğŸ§© Shared Components\n\n### FileUpload\nDrag & drop file upload with preview and validation\n\n```tsx\n<FileUpload\n  accept={{ 'image/*': ['.png', '.jpg'], 'application/pdf': ['.pdf'] }}\n  multiple={true}\n  maxSize={50 * 1024 * 1024} // 50MB\n  onFilesChange={setFiles}\n/>\n```\n\n### TagInput\nTag management with suggestions and validation\n\n```tsx\n<TagInput\n  value={tags}\n  onChange={setTags}\n  suggestions={['malware', 'phishing', 'intrusion']}\n  maxTags={10}\n/>\n```\n\n### UserSelector\nUser selection with search and multi-select support\n\n```tsx\n<UserSelector\n  value={selectedUsers}\n  onChange={setSelectedUsers}\n  multiple={true}\n  placeholder=\"Select team members...\"\n/>\n```\n\n### DateTimePicker\nDate and time selection with timezone support\n\n```tsx\n<DateTimePicker\n  value={selectedDate}\n  onChange={setSelectedDate}\n  showTime={true}\n  label=\"Due Date\"\n/>\n```\n\n### ProgressTracker\nStep-by-step progress visualization\n\n```tsx\n<ProgressTracker\n  currentStep={3}\n  totalSteps={5}\n  steps={stepDefinitions}\n  variant=\"horizontal\"\n/>\n```\n\n### HashGenerator\nFile hash generation with multiple algorithms\n\n```tsx\n<HashGenerator\n  file={selectedFile}\n  algorithms={['md5', 'sha1', 'sha256']}\n  onHashGenerated={handleHashGenerated}\n/>\n```\n\n## ğŸ”§ Modal System\n\n### ResponsiveFormDialog\nAdapts between modal (desktop) and drawer (mobile)\n\n```tsx\n<ResponsiveFormDialog\n  trigger={<Button>Open Form</Button>}\n  title=\"Form Title\"\n  description=\"Optional description\"\n  size=\"xl\" // sm, md, lg, xl, full\n>\n  <YourFormComponent />\n</ResponsiveFormDialog>\n```\n\n### Modal Variants\n\n- **FormModal**: Desktop-only modal\n- **FormDrawer**: Mobile drawer\n- **QuickFormModal**: Small modal for simple forms\n- **FullScreenFormModal**: Full-screen for complex forms\n- **SidePanelForm**: Side panel that stays open\n\n## âœ… Validation System\n\n### Zod Schemas\nComprehensive validation for all form types:\n\n```tsx\nimport { alertSchema, validateSchema } from '../validation/ValidationSchemas';\n\nconst result = validateSchema(alertSchema, formData);\nif (!result.success) {\n  console.error('Validation errors:', result.errors);\n}\n```\n\n### Custom Validators\n- Email validation\n- IP address validation\n- URL validation\n- Hash format validation\n- Date range validation\n- File type and size validation\n\n### Field-Level Validation\nReal-time validation with user-friendly error messages:\n\n```tsx\n<InputField\n  name=\"email\"\n  label=\"Email Address\"\n  validation={emailSchema}\n  required\n/>\n<FormError error={errors.email?.message} />\n```\n\n## ğŸš¨ Error Handling\n\n### Error Boundaries\nCatch and handle React errors gracefully:\n\n```tsx\n<FormErrorBoundary\n  onError={(error, errorInfo) => {\n    logErrorToService(error, errorInfo);\n  }}\n  resetKeys={[userId, workspaceId]}\n>\n  <YourFormComponent />\n</FormErrorBoundary>\n```\n\n### Error Classification\nAutomatic error categorization and appropriate responses:\n\n- **Validation Errors**: Field-level feedback\n- **Network Errors**: Retry suggestions\n- **Authorization Errors**: Redirect to login\n- **Server Errors**: User-friendly messages\n\n### Toast Notifications\nConsistent notification system:\n\n```tsx\nimport { notify } from '../error/ErrorHandling';\n\nnotify.success('Operation completed successfully');\nnotify.error('Something went wrong', 'Please try again');\nnotify.warning('Warning message');\nnotify.info('Information message');\n```\n\n### Form Submission Helper\nStandardized submission with loading states and error handling:\n\n```tsx\nconst { handleSubmission } = useErrorHandler();\n\nconst result = await handleSubmission(\n  () => createAlert(formData),\n  {\n    loadingMessage: 'Creating alert...',\n    successMessage: 'Alert created successfully!',\n    errorContext: 'Alert Creation'\n  }\n);\n```\n\n## ğŸ¨ UI/UX Best Practices\n\n### Consistent Patterns\n- Standardized field layouts\n- Consistent button placement\n- Unified loading states\n- Responsive design\n- Accessibility compliance\n\n### Progressive Disclosure\n- Quick forms for rapid entry\n- Full forms for comprehensive data\n- Tabbed interfaces for complex forms\n- Collapsible sections for optional fields\n\n### Validation Feedback\n- Real-time validation\n- Clear error messages\n- Success confirmations\n- Progress indicators\n\n## ğŸ”— Integration Examples\n\n### Page Integration\nExample of integrating forms in existing pages:\n\n```tsx\n// In AlertsPage.tsx\nimport { AlertForm } from '../components/forms/AlertForm';\nimport { ResponsiveFormDialog, useModalState } from '../components/modals/FormModals';\n\nfunction AlertsPage() {\n  const createModal = useModalState();\n  const editModal = useModalState();\n  const [editingAlert, setEditingAlert] = useState(null);\n  \n  const handleEdit = (alert) => {\n    setEditingAlert(alert);\n    editModal.openModal();\n  };\n  \n  return (\n    <div>\n      {/* Page content */}\n      \n      <ResponsiveFormDialog\n        trigger={<Button>Create Alert</Button>}\n        title=\"Create New Alert\"\n        open={createModal.open}\n        onOpenChange={createModal.setOpen}\n      >\n        <AlertForm \n          onSuccess={() => {\n            refetchAlerts();\n            createModal.closeModal();\n          }}\n          onCancel={createModal.closeModal}\n        />\n      </ResponsiveFormDialog>\n      \n      <ResponsiveFormDialog\n        title=\"Edit Alert\"\n        open={editModal.open}\n        onOpenChange={editModal.setOpen}\n      >\n        <AlertForm \n          initialData={editingAlert}\n          onSuccess={() => {\n            refetchAlerts();\n            editModal.closeModal();\n          }}\n          onCancel={editModal.closeModal}\n        />\n      </ResponsiveFormDialog>\n    </div>\n  );\n}\n```\n\n## ğŸ“š Development Guidelines\n\n### Adding New Forms\n1. Create form component in `forms/` directory\n2. Add validation schema in `ValidationSchemas.ts`\n3. Implement error handling with `FormErrorBoundary`\n4. Add to page integration\n5. Update documentation\n\n### Form Structure Template\n```tsx\nimport React, { useState } from 'react';\nimport { useForm, FormProvider } from 'react-hook-form';\nimport { zodResolver } from '@hookform/resolvers/zod';\nimport { FormErrorBoundary, useErrorHandler } from '../error/ErrorHandling';\n\nexport function NewForm({ initialData, onSuccess, onCancel }) {\n  const { handleSubmission } = useErrorHandler();\n  const [isSubmitting, setIsSubmitting] = useState(false);\n  \n  const methods = useForm({\n    resolver: zodResolver(validationSchema),\n    defaultValues: initialData || defaultValues\n  });\n  \n  const onSubmit = async (data) => {\n    const result = await handleSubmission(\n      () => submitOperation(data),\n      {\n        loadingMessage: 'Submitting...',\n        successMessage: 'Success!',\n        onSuccess\n      }\n    );\n  };\n  \n  return (\n    <FormErrorBoundary>\n      <FormProvider {...methods}>\n        <form onSubmit={methods.handleSubmit(onSubmit)}>\n          {/* Form content */}\n        </form>\n      </FormProvider>\n    </FormErrorBoundary>\n  );\n}\n```\n\n### Testing\n- Unit tests for validation schemas\n- Integration tests for form submission\n- Error boundary testing\n- Accessibility testing\n- Cross-browser testing\n\n## ğŸ”§ Troubleshooting\n\n### Common Issues\n\n1. **Form not submitting**\n   - Check validation errors in browser console\n   - Verify all required fields are filled\n   - Check network connectivity\n\n2. **Validation errors not showing**\n   - Ensure `FormError` components are added\n   - Check Zod schema definitions\n   - Verify form field names match schema\n\n3. **Modal not opening**\n   - Check modal state management\n   - Verify trigger button setup\n   - Check for JavaScript errors\n\n### Debug Mode\nEnable debug logging:\n\n```tsx\n// Add to form component\nconst DEBUG = process.env.NODE_ENV === 'development';\n\nif (DEBUG) {\n  console.log('Form data:', formData);\n  console.log('Validation errors:', errors);\n}\n```\n\n---\n\n## ğŸ“„ License\n\nThis documentation and code are part of the SentinelIQ project. All forms implement security best practices and follow the established architectural patterns.\n\nFor questions or contributions, please refer to the main project documentation.